/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/axios@0.26.1/lib/adapters/http.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var utils=require("./../utils"),settle=require("./../core/settle"),buildFullPath=require("../core/buildFullPath"),buildURL=require("./../helpers/buildURL"),http=require("http"),https=require("https"),httpFollow=require("follow-redirects").http,httpsFollow=require("follow-redirects").https,url=require("url"),zlib=require("zlib"),VERSION=require("./../env/data").version,createError=require("../core/createError"),enhanceError=require("../core/enhanceError"),transitionalDefaults=require("../defaults/transitional"),Cancel=require("../cancel/Cancel"),isHttps=/https:?/;function setProxy(e,t,r){if(e.hostname=t.host,e.host=t.host,e.port=t.port,e.path=r,t.auth){var o=Buffer.from(t.auth.username+":"+t.auth.password,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+o}e.beforeRedirect=function(e){e.headers.host=e.host,setProxy(e,t,e.href)}}module.exports=function(e){return new Promise((function(t,r){var o;function a(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}var n=function(e){a(),t(e)},s=!1,i=function(e){a(),s=!0,r(e)},u=e.data,c=e.headers,l={};if(Object.keys(c).forEach((function(e){l[e.toLowerCase()]=e})),"user-agent"in l?c[l["user-agent"]]||delete c[l["user-agent"]]:c["User-Agent"]="axios/"+VERSION,u&&!utils.isStream(u)){if(Buffer.isBuffer(u));else if(utils.isArrayBuffer(u))u=Buffer.from(new Uint8Array(u));else{if(!utils.isString(u))return i(createError("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));u=Buffer.from(u,"utf-8")}if(e.maxBodyLength>-1&&u.length>e.maxBodyLength)return i(createError("Request body larger than maxBodyLength limit",e));l["content-length"]||(c["Content-Length"]=u.length)}var h=void 0;e.auth&&(h=(e.auth.username||"")+":"+(e.auth.password||""));var p=buildFullPath(e.baseURL,e.url),f=url.parse(p),d=f.protocol||"http:";if(!h&&f.auth){var m=f.auth.split(":");h=(m[0]||"")+":"+(m[1]||"")}h&&l.authorization&&delete c[l.authorization];var g=isHttps.test(d),E=g?e.httpsAgent:e.httpAgent;try{buildURL(f.path,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(t){var v=new Error(t.message);v.config=e,v.url=e.url,v.exists=!0,i(v)}var b={path:buildURL(f.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:c,agent:E,agents:{http:e.httpAgent,https:e.httpsAgent},auth:h};e.socketPath?b.socketPath=e.socketPath:(b.hostname=f.hostname,b.port=f.port);var y,x=e.proxy;if(!x&&!1!==x){var R=d.slice(0,-1)+"_proxy",T=process.env[R]||process.env[R.toUpperCase()];if(T){var q=url.parse(T),B=process.env.no_proxy||process.env.NO_PROXY,L=!0;if(B)L=!B.split(",").map((function(e){return e.trim()})).some((function(e){return!!e&&("*"===e||("."===e[0]&&f.hostname.substr(f.hostname.length-e.length)===e||f.hostname===e))}));if(L&&(x={host:q.hostname,port:q.port,protocol:q.protocol},q.auth)){var P=q.auth.split(":");x.auth={username:P[0],password:P[1]}}}}x&&(b.headers.host=f.hostname+(f.port?":"+f.port:""),setProxy(b,x,d+"//"+f.hostname+(f.port?":"+f.port:"")+b.path));var w=g&&(!x||isHttps.test(x.protocol));e.transport?y=e.transport:0===e.maxRedirects?y=w?https:http:(e.maxRedirects&&(b.maxRedirects=e.maxRedirects),y=w?httpsFollow:httpFollow),e.maxBodyLength>-1&&(b.maxBodyLength=e.maxBodyLength),e.insecureHTTPParser&&(b.insecureHTTPParser=e.insecureHTTPParser);var A=y.request(b,(function(t){if(!A.aborted){var r=t,o=t.req||A;if(204!==t.statusCode&&"HEAD"!==o.method&&!1!==e.decompress)switch(t.headers["content-encoding"]){case"gzip":case"compress":case"deflate":r=r.pipe(zlib.createUnzip()),delete t.headers["content-encoding"]}var a={status:t.statusCode,statusText:t.statusMessage,headers:t.headers,config:e,request:o};if("stream"===e.responseType)a.data=r,settle(n,i,a);else{var u=[],c=0;r.on("data",(function(t){u.push(t),c+=t.length,e.maxContentLength>-1&&c>e.maxContentLength&&(s=!0,r.destroy(),i(createError("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,o)))})),r.on("aborted",(function(){s||(r.destroy(),i(createError("error request aborted",e,"ERR_REQUEST_ABORTED",o)))})),r.on("error",(function(t){A.aborted||i(enhanceError(t,e,null,o))})),r.on("end",(function(){try{var t=1===u.length?u[0]:Buffer.concat(u);"arraybuffer"!==e.responseType&&(t=t.toString(e.responseEncoding),e.responseEncoding&&"utf8"!==e.responseEncoding||(t=utils.stripBOM(t))),a.data=t}catch(t){i(enhanceError(t,e,t.code,a.request,a))}settle(n,i,a)}))}}}));if(A.on("error",(function(t){A.aborted&&"ERR_FR_TOO_MANY_REDIRECTS"!==t.code||i(enhanceError(t,e,null,A))})),A.on("socket",(function(e){e.setKeepAlive(!0,6e4)})),e.timeout){var C=parseInt(e.timeout,10);if(isNaN(C))return void i(createError("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",A));A.setTimeout(C,(function(){A.abort();var t="";t=e.timeoutErrorMessage?e.timeoutErrorMessage:"timeout of "+e.timeout+"ms exceeded";var r=e.transitional||transitionalDefaults;i(createError(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",A))}))}(e.cancelToken||e.signal)&&(o=function(e){A.aborted||(A.abort(),i(!e||e&&e.type?new Cancel("canceled"):e))},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o))),utils.isStream(u)?u.on("error",(function(t){i(enhanceError(t,e,null,A))})).pipe(A):A.end(u)}))};
//# sourceMappingURL=/sm/18693a8ae18b6512aae669aa08a363aeff5829bfc5bc50674f15a02e3e5f6996.map